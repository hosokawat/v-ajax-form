{"version":3,"file":"v-ajax-form.js","sources":["src/components/VAjaxForm.vue","src/components/VAjaxForm.vue?vue&type=template&id=e12966cc&lang.js"],"sourcesContent":["<template>\n    <form v-bind=\"$attrs\" :action=\"this.action\" :method=\"this.method\" @submit.prevent=\"submit\">\n        <slot></slot>\n    </form>\n</template>\n<script>\nimport { defineComponent } from 'vue';\nimport axios from 'axios';\n\nconst TARGET_TAGS = ['input','select','textarea'];\nexport default defineComponent({\n    name: 'VAjaxForm',\n    props: {\n        action: String,\n        method: String,\n        uriEncode: Boolean\n    }, methods: {\n        request(params) {\n            this.$emit('start', params);\n            let axiosRequestConfig = {};\n            let _method = this.method.toLowerCase();\n            switch (this.method) {\n                case 'get':\n                    axiosRequestConfig = {params: params};\n                    break;\n                case 'post':\n                    axiosRequestConfig = params;\n                    break;\n            }\n            axios[_method](this.action, axiosRequestConfig)\n                .then((response) => {\n                    this.$emit('receive', response);\n                })\n                .catch((response) => {\n                    this.$emit('fail', response);\n                })\n                .finally(() => {\n                    this.$emit('done', params);\n                });\n        }, submit() {\n            let params = {};\n            this.$el.querySelectorAll(TARGET_TAGS.join(\",\")).forEach((el) => {\n                if ((typeof el.attributes['disabled'] === 'undefined')\n                    && (typeof el.attributes['name'] != 'undefined')\n                ) {\n                    if ((el.type === 'radio' || el.type === 'checkbox') && !el.checked) return;\n                    let val = el.value;\n                    let name = el.attributes['name'].value;\n                    if(this.uriEncode) {\n                        val = encodeURIComponent(val);\n                        name = encodeURIComponent(name);\n                    }\n                    if (typeof params[name] === 'undefined') {\n                        params[name] = val;\n                    } else if (params[name] instanceof Array) {\n                        params[name].push(val);\n                    } else {\n                        params[name] = [params[name], val];\n                    }\n                }\n            });\n            this.request(params);\n        }\n    }\n});\n</script>\n","<template>\n    <form v-bind=\"$attrs\" :action=\"this.action\" :method=\"this.method\" @submit.prevent=\"submit\">\n        <slot></slot>\n    </form>\n</template>\n<script>\nimport { defineComponent } from 'vue';\nimport axios from 'axios';\n\nconst TARGET_TAGS = ['input','select','textarea'];\nexport default defineComponent({\n    name: 'VAjaxForm',\n    props: {\n        action: String,\n        method: String,\n        uriEncode: Boolean\n    }, methods: {\n        request(params) {\n            this.$emit('start', params);\n            let axiosRequestConfig = {};\n            let _method = this.method.toLowerCase();\n            switch (this.method) {\n                case 'get':\n                    axiosRequestConfig = {params: params};\n                    break;\n                case 'post':\n                    axiosRequestConfig = params;\n                    break;\n            }\n            axios[_method](this.action, axiosRequestConfig)\n                .then((response) => {\n                    this.$emit('receive', response);\n                })\n                .catch((response) => {\n                    this.$emit('fail', response);\n                })\n                .finally(() => {\n                    this.$emit('done', params);\n                });\n        }, submit() {\n            let params = {};\n            this.$el.querySelectorAll(TARGET_TAGS.join(\",\")).forEach((el) => {\n                if ((typeof el.attributes['disabled'] === 'undefined')\n                    && (typeof el.attributes['name'] != 'undefined')\n                ) {\n                    if ((el.type === 'radio' || el.type === 'checkbox') && !el.checked) return;\n                    let val = el.value;\n                    let name = el.attributes['name'].value;\n                    if(this.uriEncode) {\n                        val = encodeURIComponent(val);\n                        name = encodeURIComponent(name);\n                    }\n                    if (typeof params[name] === 'undefined') {\n                        params[name] = val;\n                    } else if (params[name] instanceof Array) {\n                        params[name].push(val);\n                    } else {\n                        params[name] = [params[name], val];\n                    }\n                }\n            });\n            this.request(params);\n        }\n    }\n});\n</script>\n"],"names":["defineComponent","_createElementBlock","_mergeProps","_renderSlot"],"mappings":"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"}