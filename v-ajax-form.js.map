{"version":3,"file":"v-ajax-form.js","sources":["src/components/VAjaxForm.vue","node_modules/vue-runtime-helpers/dist/normalize-component.mjs","src/main.js"],"sourcesContent":["<template>\n    <form v-bind=\"$attrs\" :action=\"action\" :method=\"method\" @submit.prevent=\"submit\">\n        <slot></slot>\n    </form>\n</template>\n<script>\nexport default {\n    name: 'VAjaxForm',\n    inheritAttrs: false,\n    props: {\n        action: {\n            type: String,\n            required: true\n        },\n        method: {\n            type: String,\n            default: 'GET',\n            validator: (value) => ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'].includes(value.toUpperCase())\n        },\n        uriEncode: {\n            type: Boolean,\n            default: false\n        }\n    },\n    emits: ['start', 'receive', 'fail', 'done'],\n    methods: {\n        request: function (params) {\n            const vm = this;\n            vm.$emit('start', params);\n            \n            const method = vm.method.toUpperCase();\n            let url = vm.action;\n            const options = { method: method };\n            \n            if (method === 'GET') {\n                const query = new URLSearchParams(params).toString();\n                if (query) {\n                    url += (url.indexOf('?') >= 0 ? '&' : '?') + query;\n                }\n            } else if (method === 'POST') {\n                options.headers = { 'Content-Type': 'application/x-www-form-urlencoded' };\n                options.body = new URLSearchParams(params);\n            } else {\n                options.headers = { 'Content-Type': 'application/json' };\n                options.body = JSON.stringify(params);\n            }\n            \n            fetch(url, options)\n                .then(function (response) {\n                    if (!response.ok) {\n                        throw new Error('HTTP error! status: ' + response.status);\n                    }\n                    return response.text().then(function(text) {\n                        try {\n                            return JSON.parse(text);\n                        } catch (e) {\n                            return text;\n                        }\n                    }).then(function(data) {\n                        vm.$emit('receive', { \n                            data: data, \n                            status: response.status, \n                            statusText: response.statusText\n                        });\n                    });\n                })\n                .catch(function (error) {\n                    vm.$emit('fail', error);\n                })\n                .finally(function () {\n                    vm.$emit('done', params);\n                });\n                }, submit: function () {\n            let params = {};\n            let vm = this;\n            vm.$el.querySelectorAll('input,select,textarea').forEach(function(el){\n                if ((typeof el.attributes['disabled'] === 'undefined')\n                    && (typeof el.attributes['name'] != 'undefined')\n                ) {\n                    if ((el.type === 'radio' || el.type === 'checkbox') && !el.checked) return;\n                    let val = el.value;\n                    let name = el.attributes['name'].value;\n                    if(vm.uriEncode) {\n                        val = encodeURIComponent(val);\n                        name = encodeURIComponent(name);\n                    }\n                    if (typeof params[name] === 'undefined') {\n                        params[name] = val;\n                    } else if (params[name] instanceof Array) {\n                        params[name].push(val);\n                    } else {\n                        params[name] = [params[name], val];\n                    }\n                }\n            });\n            vm.request(params);\n        }\n    }\n}\n</script>\n","function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    const options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    let hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            const originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            const existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\nexport default normalizeComponent;\n//# sourceMappingURL=normalize-component.mjs.map\n","import VAjaxForm from './components/VAjaxForm.vue';\n\nconst VAjaxFormPlugin = {\n  install(Vue) {\n    Vue.component('v-ajax-form', VAjaxForm);\n  }\n};\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(VAjaxFormPlugin);\n}\n\nexport default VAjaxFormPlugin;\n"],"names":["VAjaxForm"],"mappings":"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","x_google_ignoreList":[1]}