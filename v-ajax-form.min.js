var VAjaxForm=function(t){"use strict";const e={name:"VAjaxForm",inheritAttrs:!1,props:{action:{type:String,required:!0},method:{type:String,default:"GET",validator:t=>["GET","POST","PUT","DELETE","PATCH"].includes(t.toUpperCase())},uriEncode:{type:Boolean,default:!1}},emits:["start","receive","fail","done"],methods:{request:async function(t){const e=this;e.$emit("start",t);const o=e.method.toUpperCase();let n=e.action;const r={method:o};if("GET"===o){const e=new URLSearchParams(t).toString();e&&(n+=(n.indexOf("?")>=0?"&":"?")+e)}else"POST"===o?(r.headers={"Content-Type":"application/x-www-form-urlencoded"},r.body=new URLSearchParams(t)):(r.headers={"Content-Type":"application/json"},r.body=JSON.stringify(t));try{const t=await fetch(n,r);if(!t.ok)throw new Error("HTTP error! status: "+t.status);const o=await t.text();let a;try{a=JSON.parse(o)}catch(t){a=o}e.$emit("receive",{data:a,status:t.status,statusText:t.statusText})}catch(t){e.$emit("fail",t)}finally{e.$emit("done",t)}},submit:function(){let t={},e=this;e.$el.querySelectorAll("input,select,textarea").forEach((function(o){if(void 0===o.attributes.disabled&&void 0!==o.attributes.name){if(("radio"===o.type||"checkbox"===o.type)&&!o.checked)return;let n=o.value,r=o.attributes.name.value;e.uriEncode&&(n=encodeURIComponent(n),r=encodeURIComponent(r)),void 0===t[r]?t[r]=n:t[r]instanceof Array?t[r].push(n):t[r]=[t[r],n]}})),e.request(t)}}},o=["action","method"];var n=((t,e)=>{const o=t.__vccOpts||t;for(const[t,n]of e)o[t]=n;return o})(e,[["render",function(e,n,r,a,i,s){return t.openBlock(),t.createElementBlock("form",t.mergeProps(e.$attrs,{action:r.action,method:r.method,onSubmit:n[0]||(n[0]=t.withModifiers(((...t)=>s.submit&&s.submit(...t)),["prevent"]))}),[t.renderSlot(e.$slots,"default")],16,o)}]]);const r={install(t){t.component("v-ajax-form",n)}};return"undefined"!=typeof window&&window.Vue&&window.Vue.createApp&&(window.VAjaxForm=r),r}(Vue);
//# sourceMappingURL=v-ajax-form.min.js.map
