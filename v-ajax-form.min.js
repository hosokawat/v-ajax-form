var VAjaxForm=function(e){"use strict";const t=["action","method"],o=Object.assign({name:"VAjaxForm",inheritAttrs:!1},{__name:"VAjaxForm",props:{action:{type:String,required:!0},method:{type:String,default:"GET",validator:e=>["GET","POST","PUT","DELETE","PATCH"].includes(e.toUpperCase())},uriEncode:{type:Boolean,default:!1}},emits:["start","receive","fail","done"],setup(o,{emit:a}){const n=o,r=a,i=()=>{const t={};e.getCurrentInstance().proxy.$el.querySelectorAll("input,select,textarea").forEach((e=>{if(void 0===e.attributes.disabled&&void 0!==e.attributes.name){if(("radio"===e.type||"checkbox"===e.type)&&!e.checked)return;let o=e.value,a=e.attributes.name.value;n.uriEncode&&(o=encodeURIComponent(o),a=encodeURIComponent(a)),void 0===t[a]?t[a]=o:t[a]instanceof Array?t[a].push(o):t[a]=[t[a],o]}})),(async e=>{r("start",e);const t=n.method.toUpperCase();let o=n.action;const a={method:t};if("GET"===t){const t=new URLSearchParams(e).toString();t&&(o+=(o.indexOf("?")>=0?"&":"?")+t)}else"POST"===t?(a.headers={"Content-Type":"application/x-www-form-urlencoded"},a.body=new URLSearchParams(e)):(a.headers={"Content-Type":"application/json"},a.body=JSON.stringify(e));try{const e=await fetch(o,a);if(!e.ok)throw new Error("HTTP error! status: "+e.status);const t=await e.text();let n;try{n=JSON.parse(t)}catch(e){n=t}r("receive",{data:n,status:e.status,statusText:e.statusText})}catch(e){r("fail",e)}finally{r("done",e)}})(t)};return(a,n)=>(e.openBlock(),e.createElementBlock("form",e.mergeProps(a.$attrs,{action:o.action,method:o.method,onSubmit:e.withModifiers(i,["prevent"])}),[e.renderSlot(a.$slots,"default")],16,t))}}),a={install(e){e.component("v-ajax-form",o)}};return"undefined"!=typeof window&&window.Vue&&window.Vue.createApp&&(window.VAjaxForm=a),a}(Vue);
//# sourceMappingURL=v-ajax-form.min.js.map
